<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>订单管理-订单列表</title>
<link href="../../assets/css/main.css" rel="stylesheet" type="text/css" />
<link href="../../assets/css/bootstrap.css" rel="stylesheet" type="text/css" />
<link href="../../assets/css/sub.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="../../assets/css/UI-style.css">
<link rel="stylesheet" href="../../assets/font-awesome/css/font-awesome.min.css">
</head>

<body>
<div class="container-fluid yx">
		<ol class="breadcrumb">
		    <li>订单管理</li>
		    <li class="active">订单列表</li>
		</ol>
		<table class="table table-bordered demand_management_tb tab_list" width="100%" id="tableList">
			
		</table>
	

    <!-- 分页 -->
    <nav class="clearfix" aria-label="Page navigation">
        <ul class="pagination fr">
            <li class="disabled">
                <a href="#" class="fa fa-caret-left"></a>
            </li>
            <li class="active"><a href="#">1</a></li>
            <li><a href="#">2</a></li>
            <li><a href="#">3</a></li>
            <li><a href="#">4</a></li>
            <li><a href="#">5</a></li>
            <li>
                <a href="#" class="fa fa-caret-right"></a>
            </li>
        </ul>
    </nav>


</div>
<script src="../../assets/js/jquery.js"></script>
<script src="../../assets/js/sub.js"></script>
<script>

$(function(){

	$.ajax({
		type: "get",
		url: "../../apis/preq/order-list.json",
		dataType: "json",
		success: function(data){

			var htm = '<tr><th>订单号</th><th>订单名称</th><th>提交日期</th><th>操作</th><th>状态</th></tr>';

			$.each(data.list, function(idx, item){
				var tx = item.state == '提交'?'<a href="sub-order-detail.html">'+item.oNo+'</a>' : item.oNo;
				var tx2 = '';

				switch(item.state){
					case '编辑中':
					tx2 = '<a class="btn red mar_r" href="order-change.html">订单编辑</a><a class="btn yellow mar_r" href="order-view.html">订单预生成</a>';
					break;

					case '提交':
					tx2 = '<a class="btn red mar_r" disabled="disabled">订单编辑</a><a class="btn yellow omgm-list-link mar_r">子订单查看</a>';
					break;

					case '竞价中':
					tx2 = '<a class="btn red mar_r" disabled="disabled">订单编辑</a><a class="btn btn-warning mar_r" disabled="disabled">订单查看</a>';
					break;
				}
				
				htm += '<tr><td>'+tx+'</td><td>'+item.oName+'</td><td>'+item.submitTime+'</td><td>'+tx2+'</td><td><span>'+item.state+'</span></td></tr>'
			})

			$('#tableList').html(htm)
			$('#tableList :disabled').addClass('disabled').css('border-color','#dcdfe0')
			$('#tableList a[disabled="disabled"]').addClass('disabled').css('border-color','#dcdfe0').css('cursor','not-allowed')
		},
		error: function(XMLHTTPRequest, textStatus, errorThrown){
			console.log("sorry error")
		}
	})
});

</script>
</body>
</html>
